<?xml version="1.0" encoding="UTF-8"?>
<MasterDetailPage 
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:d="http://xamarin.com/schemas/2014/forms/design"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:UpService.ViewModels"
    xmlns:m="clr-namespace:UpService.Models"
    mc:Ignorable="d"
    x:Class="UpService.Views.Home">
    <!--Master:
        Prestador: InfoPerfil Serviços realizados, pendentes ou não;
        Solicitante: InfoPerfil serviços já finalizados;-->
    <MasterDetailPage.BindingContext>
        <vm:HomeViewModel/>
    </MasterDetailPage.BindingContext>
    <MasterDetailPage.Master>
        <ContentPage Title="Teste">
            <Grid BackgroundColor="LightGray">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>

                <StackLayout 
                    BackgroundColor="#DDD"
                    Padding="16"
                    Grid.Row="0" 
                    Grid.Column="0"
                    Grid.ColumnSpan="5">
                    <Label
                        FontSize="Small"
                        TextColor="{DynamicResource PrimaryDarkColor}" 
                        FontAttributes="Bold">
                        <Label.FormattedText>
                            <FormattedString>
                                <FormattedString.Spans>
                                    <Span Text="NOME"/>
                                    <Span Text=" "/>
                                    <Span Text="SOBRENOME"/>
                                </FormattedString.Spans>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                    <Label
                        FontSize="Small"
                        TextColor="{DynamicResource PrimaryDarkColor}" 
                        FontAttributes="Bold">
                        <Label.FormattedText>
                            <FormattedString>
                                <FormattedString.Spans>
                                    <Span Text="SÃO PAULO"/>
                                    <Span Text=" - "/>
                                    <Span Text="SP"/>
                                </FormattedString.Spans>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                    <Label 
                        FontSize="Small"
                        TextColor="{DynamicResource PrimaryDarkColor}" 
                        FontAttributes="Bold"
                        Text="nome_ser_humano@humano.com"/>
                </StackLayout>
                <Label 
                    Text="SERVIÇOS"
                    TextColor="{DynamicResource PrimaryDarkColor}"
                    HorizontalOptions="Center"
                    FontSize="Large"
                    Grid.Row="1"
                    Grid.Column="1"
                    Grid.ColumnSpan="3"/>
                <CollectionView Grid.Row="2"
                                Grid.Column="0"
                                Grid.ColumnSpan="5"
                                ItemsSource="{Binding MyJobs}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout 
                                    Margin="16"
                                    Orientation="Vertical">
                                <Label 
                                    Text="{Binding Title}" />
                                <Label 
                                    Text="{Binding State}"/>
                            </StackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>
        </ContentPage>
    </MasterDetailPage.Master>
    <MasterDetailPage.Detail>
        <ContentPage>
            <StackLayout>
                <RefreshView
                    RefreshColor="{DynamicResource PrimaryDarkColor}"
                    IsRefreshing="{Binding IsRefreshing}"
                    Command="{Binding RefreshCommand}"> 
                    <CollectionView >
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame 
                                    HasShadow="True">
                                    <Grid 
                                        HorizontalOptions="FillAndExpand">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="2*"/>
                                            <ColumnDefinition Width="2*"/>
                                        </Grid.ColumnDefinitions>

                                        <Label 
                                            Text="{Binding Title}"
                                            FontSize="Subtitle"
                                            FontAttributes="Bold"
                                            TextColor="{DynamicResource PrimaryDarkColor}"
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            Grid.ColumnSpan="2"/>
                                        <Label 
                                            Grid.Row="0"
                                            Grid.Column="4"
                                            Text="01/01/20"
                                            TextColor="{DynamicResource PrimaryColor}"
                                            FontSize="Small"/>

                                        <Label
                                            TextColor="{DynamicResource PrimaryDarkColor}"
                                            Grid.Row="2"
                                            Grid.Column="0"
                                            MaxLines="5"
                                            LineBreakMode="TailTruncation"
                                            Grid.ColumnSpan="5">    
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <FormattedString.Spans>
                                                        <Span 
                                                            FontSize="Medium"
                                                            FontAttributes="Bold" 
                                                            Text="Descrição: " />
                                                        <Span 
                                                            FontSize="Small"
                                                            Text="{Binding Description}" />
                                                    </FormattedString.Spans>
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </RefreshView>
            </StackLayout>
        </ContentPage>
    </MasterDetailPage.Detail>
</MasterDetailPage>